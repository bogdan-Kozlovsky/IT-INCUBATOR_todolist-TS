(this["webpackJsonpit-incubator-todolist-ts"]=this["webpackJsonpit-incubator-todolist-ts"]||[]).push([[0],{109:function(e,t,a){e.exports=a(139)},111:function(e,t,a){},118:function(e,t,a){},139:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=(a(111),a(8)),o=a.n(i),c=a(17),l=a(42);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(118);var s,u,d=a(186),f=a(187),m=a(13),p=a(192),b=a(189),g=a(19),v=Object(g.c)({name:"app",initialState:{status:"idle",error:null,isInitialized:!1},reducers:{setAppErrorAC:function(e,t){e.error=t.payload.error},setAppStatusAC:function(e,t){e.status=t.payload.status},setAppInitializedAC:function(e,t){e.isInitialized=t.payload.isInitialized}}}),h=v.reducer,k=v.actions,E=k.setAppErrorAC,C=k.setAppStatusAC,j=k.setAppInitializedAC,y=function(e){return r.a.createElement(b.a,Object.assign({elevation:6,variant:"filled"},e))},O=function(){var e=Object(c.c)((function(e){return e.app.error})),t=Object(c.b)(),a=function(e,a){"clickaway"!==a&&t(E({error:null}))},n=null!==e;return r.a.createElement(p.a,{open:n,autoHideDuration:6e3,onClose:a},r.a.createElement(y,{onClose:a,severity:"error"},e))},T=a(182),I=a(181),w=a(88),A=a.n(w),x=a(45),S=a(188),L=a(178),_=a(180),F=a(89),N=a.n(F),P=r.a.memo((function(e){var t=e.addItem,a=e.disabled,i=void 0!==a&&a,o=Object(n.useState)(""),c=Object(x.a)(o,2),l=c[0],s=c[1],u=Object(n.useState)(null),d=Object(x.a)(u,2),f=d[0],m=d[1],p=function(){""!==l.trim()?(t(l),s("")):m("Title is required")};return r.a.createElement("div",null,r.a.createElement("span",{className:N.a.span},"Add new todolist:"),r.a.createElement(S.a,{variant:"outlined",disabled:i,error:!!f,value:l,onChange:function(e){s(e.currentTarget.value)},onKeyPress:function(e){null!==f&&m(null),13===e.charCode&&p()},label:"Title",helperText:f}),r.a.createElement(L.a,{color:"primary",onClick:p,disabled:i},r.a.createElement(_.a,null)))})),z=a(90),D=a.n(z),M=c.c,R=function(e){return e.app.status},V=function(e){return e.app.isInitialized},W=a(91),q=a.n(W).a.create({baseURL:"https://social-network.samuraijs.com/api/1.1/",withCredentials:!0,headers:{"API-KEY":"edbb6621-0047-4274-8a4c-f1d2a1bf4727"}}),B=function(e){return q.post("auth/login",e)},H=function(){return q.delete("auth/login")},U=function(){return q.get("auth/me")},J=a(25),K=a.n(J),Y=a(33),$=function(e,t){e.messages.length?t(E({error:e.messages[0]})):t(E({error:"Some error occurred"})),t(C({status:"failed"}))},G=function(e,t){t(E({error:e.message?e.message:"Some error occurred"})),t(C({status:"failed"}))},Q=Object(g.b)("auth/login",function(){var e=Object(Y.a)(K.a.mark((function e(t,a){var n,r;return K.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.dispatch(C({status:"loading"})),e.prev=1,e.next=4,B(t);case 4:if(0!==(n=e.sent).data.resultCode){e.next=8;break}return a.dispatch(C({status:"succeeded"})),e.abrupt("return",{isLoggedIn:!0});case 8:return $(n.data,a.dispatch),e.abrupt("return",a.rejectWithValue({errors:n.data.messages,fieldsErrors:n.data.fieldsErrors}));case 12:return e.prev=12,e.t0=e.catch(1),r=e.t0,G(r,a.dispatch),e.abrupt("return",a.rejectWithValue({errors:[r.message],fieldsErrors:void 0}));case 17:case"end":return e.stop()}}),e,null,[[1,12]])})));return function(t,a){return e.apply(this,arguments)}}()),X=Object(g.c)({name:"auth",initialState:{isLoggedIn:!1},reducers:{setIsLoggedInAC:function(e,t){e.isLoggedIn=t.payload.value}},extraReducers:function(e){e.addCase(Q.fulfilled,(function(e,t){e.isLoggedIn=t.payload.isLoggedIn}))}}),Z=X.reducer,ee=X.actions.setIsLoggedInAC,te=function(e){return e.auth.isLoggedIn},ae=function(){return q.get("todo-lists")},ne=function(e){return q.post("todo-lists",{title:e})},re=function(e){return q.delete("todo-lists/".concat(e))},ie=function(e,t){return q.put("todo-lists/".concat(e),{title:t})},oe=a(28),ce=Object(g.c)({name:"todolist",initialState:[],reducers:{removeTodolistAC:function(e,t){var a=e.findIndex((function(e){return e.id===t.payload.id}));a>-1&&e.splice(a,1)},addTodolistAC:function(e,t){e.unshift(Object(oe.a)(Object(oe.a)({},t.payload.todolist),{},{filter:"all",entityStatus:"idle"}))},changeTodolistTitleAC:function(e,t){var a=e.findIndex((function(e){return e.id===t.payload.id}));e[a].title=t.payload.title},changeTodolistFilterAC:function(e,t){var a=e.findIndex((function(e){return e.id===t.payload.id}));e[a].filter=t.payload.filter},changeTodolistEntityStatusAC:function(e,t){var a=e.findIndex((function(e){return e.id===t.payload.id}));e[a].entityStatus=t.payload.status},setTodolistsAC:function(e,t){return t.payload.todolists.map((function(e){return Object(oe.a)(Object(oe.a)({},e),{},{filter:"all",entityStatus:"idle"})}))}}}),le=ce.reducer,se=ce.actions,ue=se.removeTodolistAC,de=se.addTodolistAC,fe=se.changeTodolistTitleAC,me=se.changeTodolistFilterAC,pe=se.changeTodolistEntityStatusAC,be=se.setTodolistsAC,ge=function(){var e=Object(c.b)(),t=Object(m.f)().pathname,a=M(R),i=M(te),o="/login"!==t,l="loading"===a,s=Object(n.useCallback)((function(){e((function(e){e(C({status:"loading"})),H().then((function(t){0===t.data.resultCode?(e(ee({value:!1})),e(C({status:"succeeded"}))):$(t.data,e)})).catch((function(t){G(t,e)}))}))}),[]),u=Object(n.useCallback)((function(t){e(function(e){return function(t){t(C({status:"loading"})),ne(e).then((function(e){t(de({todolist:e.data.data.item})),t(C({status:"succeeded"}))}))}}(t))}),[e]);return r.a.createElement("div",{className:"".concat(D.a.wrapper," container")},r.a.createElement("img",{src:A.a,alt:"logo"}),l&&r.a.createElement("div",{className:"linearProgress"},r.a.createElement(I.a,null)),o&&r.a.createElement(P,{addItem:u}),i&&r.a.createElement(T.a,{color:"inherit",onClick:s},"Log out"))},ve=a(190),he=a(193),ke=a(194),Ee=a(184),Ce=a(179),je=a(183),ye=a(95),Oe=a(52),Te=a(94),Ie=function(e){return q.get("todo-lists/".concat(e,"/tasks"))},we=function(e,t){return q.delete("todo-lists/".concat(e,"/tasks/").concat(t))},Ae=function(e,t){return q.post("todo-lists/".concat(e,"/tasks"),{title:t})},xe=function(e,t,a){return q.put("todo-lists/".concat(e,"/tasks/").concat(t),a)},Se=Object(g.b)("tasks/fetchTasks",function(){var e=Object(Y.a)(K.a.mark((function e(t,a){var n,r;return K.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.dispatch(C({status:"loading"})),e.next=3,Ie(t);case 3:return n=e.sent,r=n.data.items,a.dispatch(C({status:"succeeded"})),e.abrupt("return",{tasks:r,todolistId:t});case 7:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}()),Le=Object(g.b)("tasks/removeTask",function(){var e=Object(Y.a)(K.a.mark((function e(t){return K.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,we(t.todolistId,t.taskId);case 2:return e.abrupt("return",{taskId:t.taskId,todolistId:t.todolistId});case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),_e=Object(g.c)({name:"tasks",initialState:{},reducers:{addTaskAC:function(e,t){e[t.payload.todoListId].unshift(t.payload)},updateTaskAC:function(e,t){var a=e[t.payload.todolistId],n=a.findIndex((function(e){return e.id===t.payload.taskId}));n>-1&&(a[n]=Object(oe.a)(Object(oe.a)({},a[n]),t.payload.model))}},extraReducers:function(e){e.addCase(de,(function(e,t){e[t.payload.todolist.id]=[]})),e.addCase(ue,(function(e,t){delete e[t.payload.id]})),e.addCase(be,(function(e,t){t.payload.todolists.forEach((function(t){e[t.id]=[]}))})),e.addCase(Se.fulfilled,(function(e,t){e[t.payload.todolistId]=t.payload.tasks})),e.addCase(Le.fulfilled,(function(e,t){var a=e[t.payload.todolistId],n=a.findIndex((function(e){return e.id===t.payload.taskId}));n>-1&&a.splice(n,1)}))}}),Fe=_e.reducer,Ne=_e.actions,Pe=Ne.addTaskAC,ze=Ne.updateTaskAC,De=Object(Oe.b)({tasks:Fe,todolists:le,app:h,auth:Z}),Me=Object(g.a)({reducer:De,middleware:function(e){return e().prepend(Te.a)}}),Re=function(){var e=Object(c.b)(),t=M(te),a=Object(ye.a)({validate:function(e){return e.email?e.password?void 0:{password:"Password is required"}:{email:"Email is required"}},initialValues:{email:"",password:"",rememberMe:!1},onSubmit:function(){var t=Object(Y.a)(K.a.mark((function t(a,n){var r,i,o,c,l;return K.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e(Q(a));case 2:r=t.sent,Q.rejected.match(r)&&(null===(i=r.payload)||void 0===i||null===(o=i.fieldsErrors)||void 0===o?void 0:o.length)&&(l=null===(c=r.payload)||void 0===c?void 0:c.fieldsErrors[0],n.setFieldError(l.field,l.error));case 4:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}()});return t?r.a.createElement(m.a,{to:"/"}):r.a.createElement(je.a,{container:!0,justify:"center"},r.a.createElement(je.a,{item:!0,xs:4},r.a.createElement("form",{onSubmit:a.handleSubmit},r.a.createElement(he.a,null,r.a.createElement(Ce.a,null,r.a.createElement("p",null,"To log in get registered"," ",r.a.createElement("a",{href:"https://social-network.samuraijs.com/",target:"_blank",rel:"noreferrer"},"here")),r.a.createElement("p",null,"or use common test account credentials:"),r.a.createElement("p",null," Email: bogdankozlovski18@gmail.com"),r.a.createElement("p",null,"Password: socialPassword")),r.a.createElement(Ee.a,null,r.a.createElement(S.a,Object.assign({label:"Email",margin:"normal"},a.getFieldProps("email"))),a.errors.email?r.a.createElement("div",null,a.errors.email):null,r.a.createElement(S.a,Object.assign({type:"password",label:"Password",margin:"normal"},a.getFieldProps("password"))),a.errors.password?r.a.createElement("div",null,a.errors.password):null,r.a.createElement(ke.a,{label:"Remember me",control:r.a.createElement(ve.a,Object.assign({},a.getFieldProps("rememberMe"),{checked:a.values.rememberMe}))}),r.a.createElement(T.a,{type:"submit",variant:"contained",color:"primary"},"Login"))))))},Ve=a(177),We=a(185);!function(e){e[e.New=0]="New",e[e.InProgress=1]="InProgress",e[e.Completed=2]="Completed",e[e.Draft=3]="Draft"}(s||(s={})),function(e){e[e.Low=0]="Low",e[e.Middle=1]="Middle",e[e.Hi=2]="Hi",e[e.Urgently=3]="Urgently",e[e.Later=4]="Later"}(u||(u={}));var qe=r.a.memo((function(e){var t=e.value,a=e.onChange,i=Object(n.useState)(!1),o=Object(x.a)(i,2),c=o[0],l=o[1],s=Object(n.useState)(t),u=Object(x.a)(s,2),d=u[0],f=u[1];return c?r.a.createElement(S.a,{value:d,onChange:function(e){f(e.currentTarget.value)},autoFocus:!0,onBlur:function(){l(!1),a(d)}}):r.a.createElement("span",{onDoubleClick:function(){l(!0),f(t)}},t)})),Be=r.a.memo((function(e){var t=e.task,a=e.changeTaskTitle,i=e.changeTaskStatus,o=e.todolistId,c=e.removeTask,l=Object(n.useCallback)((function(){return c(t.id,o)}),[t.id,o]),u=Object(n.useCallback)((function(e){var a=e.currentTarget.checked;i(t.id,a?s.Completed:s.New,o)}),[t.id,o]),d=Object(n.useCallback)((function(e){a(t.id,e,o)}),[t.id,o]);return r.a.createElement("div",{key:t.id,className:t.status===s.Completed?"is-done":""},r.a.createElement(ve.a,{checked:t.status===s.Completed,color:"primary",onChange:u}),r.a.createElement(qe,{value:t.title,onChange:d}),r.a.createElement(L.a,{onClick:l},r.a.createElement(We.a,null)))})),He=function(e){var t=e.todolist,a=e.changeFilter,i=Object(n.useCallback)((function(){return a("all",t.id)}),[t.id,a]),o=Object(n.useCallback)((function(){return a("active",t.id)}),[t.id,a]),c=Object(n.useCallback)((function(){return a("completed",t.id)}),[t.id,a]);return r.a.createElement(r.a.Fragment,null,r.a.createElement(T.a,{variant:"all"===t.filter?"outlined":"text",onClick:i,color:"default"},"All"),r.a.createElement(T.a,{variant:"active"===t.filter?"outlined":"text",onClick:o,color:"primary"},"Active"),r.a.createElement(T.a,{variant:"completed"===t.filter?"outlined":"text",onClick:c,color:"secondary"},"Completed"))},Ue=a(50),Je=a.n(Ue),Ke=r.a.memo((function(e){var t=e.todolist,a=e.changeTodolistTitle,i=e.changeTaskTitle,o=e.changeTaskStatus,l=e.removeTodolist,u=e.changeFilter,d=e.removeTask,f=e.tasks,m=e.addTask,p=e.demo,b=Object(c.b)(),g=Object(n.useCallback)((function(e){m(e,t.id)}),[m,t.id]),v=Object(n.useCallback)((function(e){a(t.id,e)}),[t.id,a]),h=f;return"active"===t.filter&&(h=f.filter((function(e){return e.status===s.New}))),"completed"===t.filter&&(h=f.filter((function(e){return e.status===s.Completed}))),Object(n.useEffect)((function(){p||b(Se(t.id))}),[]),r.a.createElement("div",null,r.a.createElement("h3",{className:Je.a.title},r.a.createElement(qe,{value:t.title,onChange:v}),r.a.createElement(L.a,{onClick:function(){l(t.id)},disabled:"loading"===t.entityStatus},r.a.createElement(We.a,null))),r.a.createElement(P,{addItem:g,disabled:"loading"===t.entityStatus}),r.a.createElement("div",null,h.map((function(e){return r.a.createElement(Be,{key:e.id,task:e,todolistId:t.id,removeTask:d,changeTaskTitle:i,changeTaskStatus:o})}))),r.a.createElement("div",{style:{paddingTop:"10px"}},r.a.createElement(He,{todolist:t,changeFilter:u})))})),Ye=function(e,t,a){return function(n,r){var i=r().tasks[a].find((function(t){return t.id===e}));if(i){var o=Object(oe.a)({deadline:i.deadline,description:i.description,priority:i.priority,startDate:i.startDate,title:i.title,status:i.status},t);xe(a,e,o).then((function(r){if(0===r.data.resultCode){var i=ze({taskId:e,model:t,todolistId:a});n(i)}else $(r.data,n)})).catch((function(e){G(e,n)}))}else console.warn("task not found in the state")}},$e=function(e){return e.tasks},Ge=function(e){return e.todolists},Qe=function(e){var t=e.demo,a=void 0!==t&&t,i=Object(c.b)(),o=M(Ge),l=M($e),s=M(te),u=Object(n.useCallback)((function(e,t){i(Le({taskId:e,todolistId:t}))}),[]),d=Object(n.useCallback)((function(e,t){i(function(e,t){return function(a){a(C({status:"loading"})),Ae(t,e).then((function(e){if(0===e.data.resultCode){var t=e.data.data.item,n=Pe(t);a(n),a(C({status:"succeeded"}))}else $(e.data,a)})).catch((function(e){G(e,a)}))}}(e,t))}),[]),f=Object(n.useCallback)((function(e,t,a){i(Ye(e,{status:t},a))}),[]),p=Object(n.useCallback)((function(e,t,a){i(Ye(e,{title:t},a))}),[]),b=Object(n.useCallback)((function(e,t){i(me({id:t,filter:e}))}),[]),g=Object(n.useCallback)((function(e){var t;i((t=e,function(e){e(C({status:"loading"})),e(pe({id:t,status:"loading"})),re(t).then((function(){e(ue({id:t})),e(C({status:"succeeded"}))}))}))}),[]),v=Object(n.useCallback)((function(e,t){i(function(e,t){return function(a){ie(e,t).then((function(){a(fe({id:e,title:t}))}))}}(e,t))}),[]);return Object(n.useEffect)((function(){!a&&s&&i((function(e){e(C({status:"loading"})),ae().then((function(t){e(be({todolists:t.data})),e(C({status:"succeeded"}))})).catch((function(t){G(t,e)}))}))}),[]),s?r.a.createElement(je.a,{container:!0,spacing:3,className:Je.a.wrapper},o.map((function(e){var t=l[e.id];return r.a.createElement(je.a,{key:e.id},r.a.createElement(Ve.a,{className:Je.a.block},r.a.createElement(Ke,{todolist:e,tasks:t,removeTask:u,changeFilter:b,addTask:d,changeTaskStatus:f,removeTodolist:g,changeTaskTitle:p,changeTodolistTitle:v,demo:a})))}))):r.a.createElement(m.a,{to:"/login"})},Xe=function(e){var t=e.demo,a=void 0!==t&&t,i=Object(c.b)(),o=M(V);return Object(n.useEffect)((function(){a||i((function(e){U().then((function(t){0===t.data.resultCode&&e(ee({value:!0})),e(j({isInitialized:!0}))}))}))}),[]),o?r.a.createElement("div",{className:"App"},r.a.createElement(O,null),r.a.createElement(ge,null),r.a.createElement(f.a,{fixed:!0},r.a.createElement(m.b,{path:"/",render:function(){return r.a.createElement(Qe,{demo:a})}}),r.a.createElement(m.b,{path:"/login",render:function(){return r.a.createElement(Re,null)}}))):r.a.createElement("div",{className:"progress"},r.a.createElement(d.a,null))};o.a.render(r.a.createElement(c.a,{store:Me},r.a.createElement(l.a,null,r.a.createElement(Xe,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},50:function(e,t,a){e.exports={wrapper:"style_wrapper__ITAYz",block:"style_block__3rCaN",title:"style_title__2zFL0"}},88:function(e,t,a){e.exports=a.p+"static/media/logo.7825c304.svg"},89:function(e,t,a){e.exports={span:"style_span__zc1F9"}},90:function(e,t,a){e.exports={wrapper:"style_wrapper__2CV6k"}}},[[109,1,2]]]);
//# sourceMappingURL=main.8500c9f7.chunk.js.map